import{v as e}from"./@vue.runtime-dom-0c977c95.js";import{i as t}from"./index.umd.min-b68308bb.js";import{u as l}from"./index-c06e60a9.js";import"./vue-echarts-11c03c89.js";import"./element-plus-961823fe.js";import"./store-52839c99.js";import"./index-4d43d044.js";import{B as s,A as o}from"./@element-plus.icons-vue-15072d5d.js";import{f as r,a5 as a,o as i,V as p,W as m,g as n,c as u,Z as c,X as d,_ as j,a as v,a3 as b,F as f}from"./@vue.runtime-core-dd57a9c9.js";import{r as y,M as h}from"./@vue.reactivity-9aee8bf6.js";import"./@vue.shared-dddd31b8.js";import"./array.prototype.flat-eee42aa4.js";import"./define-properties-b1343066.js";import"./object-keys-e5f060db.js";import"./has-property-descriptors-6845433e.js";import"./get-intrinsic-cff09dfa.js";import"./has-symbols-a48c7173.js";import"./function-bind-cd5d7d08.js";import"./has-3a5c7287.js";import"./call-bind-cfba7623.js";import"./es-abstract-253c30b8.js";import"./has-proto-93b28181.js";import"./gopd-1516b43e.js";import"./is-regex-74a42cfc.js";import"./has-tostringtag-ad4fd641.js";import"./is-callable-99eeba16.js";import"./object-inspect-66cad57c.js";import"./es-to-primitive-6664914a.js";import"./is-date-object-d2231eea.js";import"./is-symbol-3a29a1ce.js";import"./safe-regex-test-183ad494.js";import"./es-shim-unscopables-89146e87.js";import"./vue-6d1d317a.js";import"./vue-router-17136280.js";import"./monaco-editor-c28fb00f.js";import"./axios-6b2fb661.js";import"./nprogress-64657d8f.js";import"./lodash-es-8394daf0.js";import"./@vueuse.core-3c960f69.js";import"./@vueuse.shared-2b88397c.js";import"./pinia-efddbf44.js";import"./vue-demi-71ba0ef2.js";import"./mockjs-0b3ee9ca.js";import"./merge-4bdec194.js";import"./mitt-2d52b530.js";import"./clone-deep-53153407.js";import"./shallow-clone-d419fbda.js";import"./kind-of-d78bf752.js";import"./is-plain-object-40c8282f.js";import"./isobject-c886ab54.js";import"./resize-detector-2312ef2b.js";import"./echarts-e550b62f.js";import"./tslib-a4e99503.js";import"./zrender-f72fb7be.js";import"./@ctrl.tinycolor-d9b9bf03.js";import"./@popperjs.core-b696b006.js";import"./dayjs-89173748.js";import"./async-validator-ff95bfc9.js";import"./memoize-one-63ab667a.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui.dom-92665be4.js";import"./@floating-ui.core-c1b3624a.js";const _={key:0,style:{color:"#d83b01"}},g={key:1,style:{color:"#00b294"}},k=v("div",{style:{"text-align":"center"}},"=",-1),x=r({name:"customer_pro-wxTemplate"}),V=r({...x,setup(r){const{service:x}=l(),V=t.useUpsert({items:[{label:"类型",prop:"type",span:12,required:!0,component:{name:"el-select",options:[{label:"线索自动分配",value:1},{label:"线索手动分配",value:2},{label:"线索跟进",value:3},{label:"订单成交",value:4}]}},{label:"名称",prop:"name",span:12,required:!0,component:{name:"el-input"}},{label:"模板ID",prop:"template_id",required:!0,component:{name:"el-input"}},{label:"状态",prop:"status",value:1,component:{name:"cl-switch",props:{activeValue:1,inactiveValue:0,activeText:"正常",inactiveText:"禁用",inlinePrompt:!0}}}],onOpened(e){var t;"add"==(null==(t=V.value)?void 0:t.mode)&&(e.fields=T.value)},onSubmit(e,{next:t,close:l,done:s}){t(e)}}),w=t.useTable({columns:[{type:"selection"},{label:"类型",prop:"type",dict:[{label:"线索分配",value:1},{label:"线索跟进",value:2},{label:"订单成交",value:3},{label:"考勤打卡",value:4}]},{label:"模板名称",prop:"name"},{label:"模板ID",prop:"template_id"},{label:"状态",prop:"status"},{label:"创建时间",prop:"createTime"},{type:"op",buttons:["edit"]}]}),z=t.useCrud({service:x.customer_pro.wxTemplate},(e=>{e.refresh()})),C=y(!0),T=y([{name:"",value:""}]),U=(e,t)=>{var l;if("add"==e&&T.value.push({name:"",value:""}),"reduce"==e&&(t||0==t)){if(1==T.value.length)return void(C.value=!0);T.value.splice(t,1)}null==(l=V.value)||l.setForm("fields",T.value)};return(t,l)=>{const r=a("cl-refresh-btn"),y=a("cl-add-btn"),x=a("cl-multi-delete-btn"),T=a("cl-flex1"),q=a("cl-search-key"),D=a("cl-row"),F=a("cl-table"),I=a("cl-pagination"),A=a("el-button"),B=a("el-input"),M=a("el-col"),P=a("el-row"),W=a("cl-upsert"),X=a("cl-crud");return i(),p(X,{ref_key:"Crud",ref:z},{default:m((()=>[n(D,null,{default:m((()=>[n(r),n(y),n(x),n(T),n(q)])),_:1}),n(D,null,{default:m((()=>[n(F,{ref_key:"Table",ref:w,border:!1},{"column-status":m((({scope:e})=>[0==e.row.status?(i(),u("span",_," 禁止 ")):c("",!0),1==e.row.status?(i(),u("span",g," 正常 ")):c("",!0)])),_:1},512)])),_:1}),n(D,null,{default:m((()=>[n(T),n(I)])),_:1}),n(W,{ref_key:"Upsert",ref:V},{"slot-fields":m((({scope:t})=>[d(n(A,{size:"large",icon:h(s),style:{width:"100%"},onClick:l[0]||(l[0]=e=>C.value=!1)},{default:m((()=>[j("添加")])),_:1},8,["icon"]),[[e,C.value]]),d(v("div",null,[(i(!0),u(f,null,b(t.fields,((e,t)=>(i(),p(P,{gutter:10,key:t},{default:m((()=>[n(M,{span:9},{default:m((()=>[n(B,{placeholder:"属性名",modelValue:e.name,"onUpdate:modelValue":t=>e.name=t},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),n(M,{span:1},{default:m((()=>[k])),_:1}),n(M,{span:9},{default:m((()=>[n(B,{placeholder:"属性值",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),n(M,{span:5},{default:m((()=>[n(A,{type:"primary",size:"small",icon:h(o),circle:"",onClick:e=>U("reduce",t)},null,8,["icon","onClick"]),n(A,{type:"primary",size:"small",icon:h(s),circle:"",onClick:l[1]||(l[1]=e=>U("add"))},null,8,["icon"])])),_:2},1024)])),_:2},1024)))),128))],512),[[e,!C.value]])])),_:1},512)])),_:1},512)}}});export{V as default};
