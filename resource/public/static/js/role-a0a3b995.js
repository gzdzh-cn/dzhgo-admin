import{i as e}from"./index.umd.min-b68308bb.js";import{u as t}from"./index-c06e60a9.js";import"./vue-echarts-11c03c89.js";import"./element-plus-961823fe.js";import"./store-52839c99.js";import{a as r}from"./index-4d43d044.js";import{f as s,A as o,a5 as l,o as a,c as i,g as p,a as n,W as m,V as c}from"./@vue.runtime-core-dd57a9c9.js";import{r as u}from"./@vue.reactivity-9aee8bf6.js";import{_ as d}from"./vue-qr-c4264fa6.js";import"./array.prototype.flat-eee42aa4.js";import"./define-properties-b1343066.js";import"./object-keys-e5f060db.js";import"./has-property-descriptors-6845433e.js";import"./get-intrinsic-cff09dfa.js";import"./has-symbols-a48c7173.js";import"./function-bind-cd5d7d08.js";import"./has-3a5c7287.js";import"./call-bind-cfba7623.js";import"./es-abstract-253c30b8.js";import"./has-proto-93b28181.js";import"./gopd-1516b43e.js";import"./is-regex-74a42cfc.js";import"./has-tostringtag-ad4fd641.js";import"./is-callable-99eeba16.js";import"./object-inspect-66cad57c.js";import"./es-to-primitive-6664914a.js";import"./is-date-object-d2231eea.js";import"./is-symbol-3a29a1ce.js";import"./safe-regex-test-183ad494.js";import"./es-shim-unscopables-89146e87.js";import"./vue-6d1d317a.js";import"./@vue.runtime-dom-0c977c95.js";import"./@vue.shared-dddd31b8.js";import"./vue-router-17136280.js";import"./monaco-editor-c28fb00f.js";import"./axios-6b2fb661.js";import"./nprogress-64657d8f.js";import"./lodash-es-8394daf0.js";import"./@vueuse.core-3c960f69.js";import"./@vueuse.shared-2b88397c.js";import"./pinia-efddbf44.js";import"./vue-demi-71ba0ef2.js";import"./mockjs-0b3ee9ca.js";import"./merge-4bdec194.js";import"./mitt-2d52b530.js";import"./clone-deep-53153407.js";import"./shallow-clone-d419fbda.js";import"./kind-of-d78bf752.js";import"./is-plain-object-40c8282f.js";import"./isobject-c886ab54.js";import"./@element-plus.icons-vue-15072d5d.js";import"./resize-detector-2312ef2b.js";import"./echarts-e550b62f.js";import"./tslib-a4e99503.js";import"./zrender-f72fb7be.js";import"./@ctrl.tinycolor-d9b9bf03.js";import"./@popperjs.core-b696b006.js";import"./dayjs-89173748.js";import"./async-validator-ff95bfc9.js";import"./memoize-one-63ab667a.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui.dom-92665be4.js";import"./@floating-ui.core-c1b3624a.js";import"./js-binary-schema-parser-814ef804.js";const j={class:"menu-check"},h={class:"menu-check__scroller"},v=s({name:"menu-check"}),f=d(s({...v,props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(s,{emit:c}){const d=s,{service:v}=t(),f=u(),b=u(),y=u("");function k(e,t){return!e||t.name.includes(e)}function _(e,{checkedKeys:t,halfCheckedKeys:r}){c("update:modelValue",[...t,...r])}return o(y,(e=>{f.value.filter(e)})),e.useUpsert({async onOpened(){await async function(){return v.base.sys.menu.list().then((e=>{b.value=r(e)}))}(),f.value.setCheckedKeys((d.modelValue||[]).filter((e=>{var t;return null==(t=f.value.getNode(e))?void 0:t.isLeaf})))}}),(e,t)=>{const r=l("el-input"),s=l("el-tree"),o=l("el-scrollbar");return a(),i("div",j,[p(r,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),placeholder:"输入关键字进行过滤"},null,8,["modelValue"]),n("div",h,[p(o,{"max-height":"200px"},{default:m((()=>[p(s,{ref_key:"Tree",ref:f,"node-key":"id","show-checkbox":"",data:b.value,props:{label:"name",children:"children"},"filter-node-method":k,onCheck:_},null,8,["data"])])),_:1})])])}}}),[["__scopeId","data-v-85a9ecd3"]]),b={class:"dept-check"},y={class:"dept-check__search"},k={class:"dept-check__tree"},_=s({name:"dept-check"}),g=d(s({..._,props:{modelValue:{type:Array,default:()=>[]},checkStrictly:Boolean},emits:["update:modelValue"],setup(s,{emit:c}){const d=s,{service:j}=t(),h=u(),v=u(),f=u("");function _(e,t){return!e||t.name.includes(e)}function g(e,{checkedKeys:t}){c("update:modelValue",t)}return o(f,(e=>{h.value.filter(e)})),e.useUpsert({async onOpened(){await async function(){return j.base.sys.department.list().then((e=>{v.value=r(e)}))}(),h.value.setCheckedKeys(d.modelValue||[])}}),(e,t)=>{const r=l("el-input"),o=l("el-tree"),c=l("el-scrollbar");return a(),i("div",b,[n("div",y,[p(r,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),placeholder:"输入关键字进行过滤"},null,8,["modelValue"])]),n("div",k,[p(c,{"max-height":"200px"},{default:m((()=>[p(o,{ref_key:"Tree",ref:h,"node-key":"id","show-checkbox":"",data:v.value,props:{label:"name",children:"children"},"filter-node-method":_,"check-strictly":s.checkStrictly,onCheck:g},null,8,["data","check-strictly"])])),_:1})])])}}}),[["__scopeId","data-v-991eb561"]]),x=n("span",{style:{marginLeft:"10px",fontSize:"12px"}},"是否关联上下级",-1),V=s({name:"sys-role"}),w=s({...V,setup(r){const{service:s}=t(),o=e.useCrud({service:s.base.sys.role},(e=>{e.refresh()})),i=e.useUpsert({dialog:{width:"800px"},items:[{prop:"name",label:"名称",span:12,required:!0,component:{name:"el-input"}},{prop:"label",label:"标识",span:12,required:!0,component:{name:"el-input"}},{prop:"remark",label:"备注",span:24,component:{name:"el-input",props:{type:"textarea",rows:4}}},{label:"功能权限",prop:"menuIdList",value:[],component:{vm:f}},{label:"数据权限",prop:"relevance",flex:!1,component:{name:"slot-relevance"}},{label:"",prop:"departmentIdList",value:[],component:{vm:g,style:{marginTop:"-10px"}}}],onOpened(e){u(e.relevance||0)}}),n=e.useTable({columns:[{type:"selection",width:60},{prop:"name",label:"名称",minWidth:150},{prop:"label",label:"标识",minWidth:120},{prop:"remark",label:"备注",showOverflowTooltip:!0,minWidth:150},{prop:"createTime",label:"创建时间",sortable:"custom",minWidth:160},{prop:"updateTime",label:"更新时间",sortable:"custom",minWidth:160},{label:"操作",type:"op",buttons:["edit","delete"]}]});function u(e){var t;null==(t=i.value)||t.setProps("departmentIdList",{checkStrictly:0==e})}return(e,t)=>{const r=l("cl-refresh-btn"),s=l("cl-add-btn"),d=l("cl-multi-delete-btn"),j=l("cl-flex1"),h=l("cl-search-key"),v=l("cl-row"),f=l("cl-table"),b=l("cl-pagination"),y=l("el-switch"),k=l("cl-upsert"),_=l("cl-crud");return a(),c(_,{ref_key:"Crud",ref:o},{default:m((()=>[p(v,null,{default:m((()=>[p(r),p(s),p(d),p(j),p(h)])),_:1}),p(v,null,{default:m((()=>[p(f,{ref_key:"Table",ref:n,"default-sort":{prop:"createTime",order:"descending"}},null,512)])),_:1}),p(v,null,{default:m((()=>[p(j),p(b)])),_:1}),p(k,{ref_key:"Upsert",ref:i},{"slot-relevance":m((({scope:e})=>[p(y,{modelValue:e.relevance,"onUpdate:modelValue":t=>e.relevance=t,"active-value":1,"inactive-value":0,onChange:u},null,8,["modelValue","onUpdate:modelValue"]),x])),_:1},512)])),_:1},512)}}});export{w as default};
