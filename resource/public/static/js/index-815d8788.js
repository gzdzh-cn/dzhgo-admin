import{v as e,a as o}from"./@vue.runtime-dom-0c977c95.js";import{u as a,b as s}from"./index-c06e60a9.js";import"./vue-echarts-11c03c89.js";import{a as t}from"./element-plus-961823fe.js";import"./store-52839c99.js";import"./index-4d43d044.js";import{f as r,h as i,o as l,c as p,a5 as n,a as m,g as c,W as u,X as d,_ as f,F as j,a3 as v,aT as h,aS as g}from"./@vue.runtime-core-dd57a9c9.js";import{r as b,h as y,M as x}from"./@vue.reactivity-9aee8bf6.js";import{_ as V}from"./vue-qr-c4264fa6.js";import{a1 as _,a2 as k,a3 as w,a4 as C}from"./@element-plus.icons-vue-15072d5d.js";import z from"./login-left-c32ae7af.js";import{ak as I,D as T}from"./@vue.shared-dddd31b8.js";import"./vue-router-17136280.js";import"./monaco-editor-c28fb00f.js";import"./axios-6b2fb661.js";import"./array.prototype.flat-eee42aa4.js";import"./define-properties-b1343066.js";import"./object-keys-e5f060db.js";import"./has-property-descriptors-6845433e.js";import"./get-intrinsic-cff09dfa.js";import"./has-symbols-a48c7173.js";import"./function-bind-cd5d7d08.js";import"./has-3a5c7287.js";import"./call-bind-cfba7623.js";import"./es-abstract-253c30b8.js";import"./has-proto-93b28181.js";import"./gopd-1516b43e.js";import"./is-regex-74a42cfc.js";import"./has-tostringtag-ad4fd641.js";import"./is-callable-99eeba16.js";import"./object-inspect-66cad57c.js";import"./es-to-primitive-6664914a.js";import"./is-date-object-d2231eea.js";import"./is-symbol-3a29a1ce.js";import"./safe-regex-test-183ad494.js";import"./es-shim-unscopables-89146e87.js";import"./nprogress-64657d8f.js";import"./lodash-es-8394daf0.js";import"./@vueuse.core-3c960f69.js";import"./@vueuse.shared-2b88397c.js";import"./pinia-efddbf44.js";import"./vue-demi-71ba0ef2.js";import"./mockjs-0b3ee9ca.js";import"./merge-4bdec194.js";import"./mitt-2d52b530.js";import"./clone-deep-53153407.js";import"./shallow-clone-d419fbda.js";import"./kind-of-d78bf752.js";import"./is-plain-object-40c8282f.js";import"./isobject-c886ab54.js";import"./resize-detector-2312ef2b.js";import"./echarts-e550b62f.js";import"./tslib-a4e99503.js";import"./zrender-f72fb7be.js";import"./@ctrl.tinycolor-d9b9bf03.js";import"./@popperjs.core-b696b006.js";import"./dayjs-89173748.js";import"./async-validator-ff95bfc9.js";import"./memoize-one-63ab667a.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui.dom-92665be4.js";import"./@floating-ui.core-c1b3624a.js";import"./js-binary-schema-parser-814ef804.js";const L=["innerHTML"],M=["src"],U=r({name:"undefined"}),H=V(r({...U,emits:["update:modelValue","change"],setup(e,{expose:o,emit:s}){const{service:r}=a(),n=b(""),m=b("");function c(){r.base.open.captcha({height:40,width:150}).then((({captchaId:e,data:o})=>{o.includes(";base64,")?n.value=o:m.value=o,s("update:modelValue",e),s("change",{base64:n,svg:m,captchaId:e})})).catch((e=>{t.error(e.message)}))}return i((()=>{c()})),o({refresh:c}),(e,o)=>(l(),p("div",{class:"captcha",onClick:c},[m.value?(l(),p("div",{key:0,class:"svg",innerHTML:m.value},null,8,L)):(l(),p("img",{key:1,class:"base64",src:n.value,alt:""},null,8,M))]))}}),[["__scopeId","data-v-91df2060"]]),K={class:"select-none"},F=(e=>(h("data-v-612b5b5e"),e=e(),g(),e))((()=>m("img",{src:"/static/img/bg.png",class:"wave"},null,-1))),R={class:"login-container"},q={class:"img"},D={class:"login-box"},N={class:"login-form"},P=["src"],S={class:"outline-none"},W={class:"type-it","data-typeit-id":"0904744"},X={class:"mutiType"},A=["innerHTML"],B=r({name:"login"}),E=V(r({...B,setup(r){const{refs:h,setRefs:g,router:V,service:L}=a(),{user:M,app:U,setting:B}=s();b(0);const E=b(!1);b("");const G=[{title:"账号登录",type:"account"}],J=b("account"),Q=b(!0),Y=b(0),Z=b(B.setting.logo||U.info.logo),$=b(B.setting.siteName||U.info.name),O=b(B.setting.copyright),ee=b(!1),oe=y({username:"",password:"",captchaId:"",verifyCode:"",phone:"",code:""});async function ae(){if("account"==J.value){if(!oe.username)return t.error("用户名不能为空");if(!oe.password)return t.error("密码不能为空");if(!oe.verifyCode)return t.error("图片验证码不能为空")}else{if(!oe.phone)return t.error("手机号码不能为空");if(!oe.code)return t.error("验证码不能为空")}ee.value=!0;try{let e;"account"==J.value&&(e=await L.base.open.login(oe)),M.setToken(e),await Promise.all(U.events.hasToken.map((e=>e()))),V.push("/")}catch(e){"account"==J.value&&h.captcha.refresh(),t.error(e.message)}ee.value=!1}return y({phone:"",code:""}),i((()=>{})),(a,s)=>{const t=n("el-input"),r=n("el-form-item"),i=n("el-button"),h=n("el-form");return l(),p("div",K,[F,m("div",R,[m("div",q,[c(z)]),m("div",D,[m("div",N,[m("img",{class:"avatar",src:Z.value,alt:"Logo"},null,8,P),m("h2",S,[m("div",null,[m("span",W,I($.value),1)])]),c(h,{ref:"ruleFormRef",size:"large"},{default:u((()=>[d(m("div",null,[c(r,{prop:"username"},{default:u((()=>[c(t,{modelValue:oe.username,"onUpdate:modelValue":s[0]||(s[0]=e=>oe.username=e),clearable:"",placeholder:"请输入用户名",maxlength:"20",autocomplete:"on","prefix-icon":x(_)},null,8,["modelValue","prefix-icon"])])),_:1}),c(r,{prop:"password"},{default:u((()=>[c(t,{modelValue:oe.password,"onUpdate:modelValue":s[1]||(s[1]=e=>oe.password=e),clearable:"","show-password":"",placeholder:"请输入密码","prefix-icon":x(k)},null,8,["modelValue","prefix-icon"])])),_:1}),c(r,{prop:"verifyCode"},{default:u((()=>[c(t,{modelValue:oe.verifyCode,"onUpdate:modelValue":s[4]||(s[4]=e=>oe.verifyCode=e),clearable:"",placeholder:"请输入验证码","prefix-icon":x(w),onKeyup:o(ae,["enter"])},{append:u((()=>[c(H,{ref:x(g)("captcha"),modelValue:oe.captchaId,"onUpdate:modelValue":s[2]||(s[2]=e=>oe.captchaId=e),onChange:s[3]||(s[3]=()=>{oe.verifyCode=""})},null,8,["modelValue"])])),_:1},8,["modelValue","prefix-icon","onKeyup"])])),_:1})],512),[[e,"account"==J.value]]),d(m("div",null,[c(h,{ref:"ruleFormRef",size:"large"},{default:u((()=>[c(r,{prop:"phone"},{default:u((()=>[c(t,{modelValue:oe.phone,"onUpdate:modelValue":s[5]||(s[5]=e=>oe.phone=e),class:"code",placeholder:"请输入手机号","prefix-icon":x(C)},{suffix:u((()=>[c(i,{onClick:a.getCode,style:{border:"none"}},{default:u((()=>[d(m("span",null,"发送验证码",512),[[e,Q.value]]),d(m("span",{class:"count"},I(Y.value)+" s",513),[[e,!Q.value]])])),_:1},8,["onClick"])])),_:1},8,["modelValue","prefix-icon"])])),_:1}),c(r,{label:"验证码"},{default:u((()=>[c(t,{modelValue:oe.code,"onUpdate:modelValue":s[6]||(s[6]=e=>oe.code=e),type:"text",placeholder:"请输入手机验证码","prefix-icon":x(w),maxlength:"4",autocomplete:"off",onKeyup:o(ae,["enter"])},null,8,["modelValue","prefix-icon","onKeyup"])])),_:1})])),_:1},512)],512),[[e,"mobile"==J.value]]),c(r,null,{default:u((()=>[c(i,{class:"w-full mt-4",size:"default",type:"primary",loading:ee.value,onClick:ae,disabled:E.value},{default:u((()=>[f(" 登录 ")])),_:1},8,["loading","disabled"])])),_:1}),c(r,null,{default:u((()=>[m("div",X,[(l(),p(j,null,v(G,((e,o)=>c(i,{key:o,class:T(J.value==e.type?"active":""),onClick:o=>{return a=e.type,void(J.value=a);var a}},{default:u((()=>[f(I(e.title),1)])),_:2},1032,["class","onClick"]))),64))])])),_:1})])),_:1},512)])])]),m("div",{class:"bottom-text",innerHTML:O.value},null,8,A)])}}}),[["__scopeId","data-v-612b5b5e"]]);export{E as default};
