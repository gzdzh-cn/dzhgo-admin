import{u as e,b as t}from"./index-c06e60a9.js";import"./vue-echarts-11c03c89.js";import{a as i}from"./element-plus-961823fe.js";import"./store-52839c99.js";import"./index-4d43d044.js";import{v as s}from"./vue-qr-c4264fa6.js";import{f as o,h as a,a5 as l,o as r,c as p,g as m,W as u,Z as n,V as c,a as d,_ as v}from"./@vue.runtime-core-dd57a9c9.js";import{r as j,h as f}from"./@vue.reactivity-9aee8bf6.js";import"./vue-router-17136280.js";import"./monaco-editor-c28fb00f.js";import"./axios-6b2fb661.js";import"./array.prototype.flat-eee42aa4.js";import"./define-properties-b1343066.js";import"./object-keys-e5f060db.js";import"./has-property-descriptors-6845433e.js";import"./get-intrinsic-cff09dfa.js";import"./has-symbols-a48c7173.js";import"./function-bind-cd5d7d08.js";import"./has-3a5c7287.js";import"./call-bind-cfba7623.js";import"./es-abstract-253c30b8.js";import"./has-proto-93b28181.js";import"./gopd-1516b43e.js";import"./is-regex-74a42cfc.js";import"./has-tostringtag-ad4fd641.js";import"./is-callable-99eeba16.js";import"./object-inspect-66cad57c.js";import"./es-to-primitive-6664914a.js";import"./is-date-object-d2231eea.js";import"./is-symbol-3a29a1ce.js";import"./safe-regex-test-183ad494.js";import"./es-shim-unscopables-89146e87.js";import"./nprogress-64657d8f.js";import"./lodash-es-8394daf0.js";import"./@vueuse.core-3c960f69.js";import"./@vueuse.shared-2b88397c.js";import"./pinia-efddbf44.js";import"./vue-demi-71ba0ef2.js";import"./mockjs-0b3ee9ca.js";import"./merge-4bdec194.js";import"./mitt-2d52b530.js";import"./clone-deep-53153407.js";import"./shallow-clone-d419fbda.js";import"./kind-of-d78bf752.js";import"./is-plain-object-40c8282f.js";import"./isobject-c886ab54.js";import"./@element-plus.icons-vue-15072d5d.js";import"./@vue.runtime-dom-0c977c95.js";import"./@vue.shared-dddd31b8.js";import"./resize-detector-2312ef2b.js";import"./echarts-e550b62f.js";import"./tslib-a4e99503.js";import"./zrender-f72fb7be.js";import"./@ctrl.tinycolor-d9b9bf03.js";import"./@popperjs.core-b696b006.js";import"./dayjs-89173748.js";import"./async-validator-ff95bfc9.js";import"./memoize-one-63ab667a.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui.dom-92665be4.js";import"./@floating-ui.core-c1b3624a.js";import"./js-binary-schema-parser-814ef804.js";const b={class:"view-my"},y={key:0},h=d("span",{style:{color:"#ea4300","font-size":"14px"}},"格式：http://移动端域名/#/pages/index/wxSubscribe",-1),x={style:{"max-width":"800px"}},g=d("div",{style:{padding:"10px",color:"#ea4300"}}," 扫码绑定公众号，接收通知 ",-1),_=d("span",{style:{"font-size":"14px"}}," 先在“基础设置-公众号管理-配置-基础设置-公众号”中配置好公众号相关参数； ",-1),w=d("span",{style:{"font-size":"14px"}}," 在“基础设置-公众号管理-消息模版”中添加已在公众号后台审核通过的消息模版； ",-1),k=d("span",{style:{"font-size":"14px"}}," 关注该公众号； ",-1),z=d("span",{style:{"font-size":"14px"}}," 扫码绑定微信。 取消关注公众号后无法再接收到微信通知； ",-1),S={style:{padding:"5px",display:"flex","flex-direction":"row","justify-content":"space-around","align-items":"center"}},V=o({name:"customer_pro-setting"}),U=o({...V,setup(o){const{service:V}=e();t();const U=j(),W=j(!1),q=j(!1),C=j({}),D=j("/customer_pro/mpico.png"),I=f({active:1,inactive:0}),L=async()=>{C.value=await V.customer_pro.config.info({id:1})},Q=()=>{q.value=!0,V.customer_pro.config.update({id:1,...C.value}).then((()=>{i.success("更新成功")})).catch((e=>{i.error(e.message)})).finally((()=>{q.value=!1,L()}))};return a((async()=>{await(async()=>{U.value=await V.customer_pro.comm.person(),W.value=U.value.roleIds.split(",").includes("1")})(),L()})),(e,t)=>{const i=l("el-input"),o=l("el-form-item"),a=l("el-switch"),j=l("el-form"),f=l("el-step"),V=l("el-steps"),L=l("el-result"),R=l("el-card"),Z=l("el-tab-pane"),A=l("el-tabs"),B=l("el-button");return r(),p("div",b,[m(A,{type:"border-card"},{default:u((()=>[m(Z,{label:"绑定微信"},{default:u((()=>[m(j,{model:C.value,"label-width":"auto",style:{"max-width":"600px"}},{default:u((()=>[W.value?(r(),p("div",y,[m(o,{label:"公众号订阅链接"},{default:u((()=>[m(i,{modelValue:C.value.wpSubscribeUrl,"onUpdate:modelValue":t[0]||(t[0]=e=>C.value.wpSubscribeUrl=e),placeholder:"格式：http://移动端域名/#/pages/index/wxSubscribe<"},null,8,["modelValue"]),h])),_:1}),m(o,{label:"公众号消息推送"},{default:u((()=>[m(a,{modelValue:C.value.pushWp,"onUpdate:modelValue":t[1]||(t[1]=e=>C.value.pushWp=e),"inline-prompt":"","active-text":"推送","inactive-text":"禁止","active-value":I.active,"inactive-value":I.inactive},null,8,["modelValue","active-value","inactive-value"])])),_:1})])):n("",!0),W.value?n("",!0):(r(),c(o,{key:1,label:"接收线索分配"},{default:u((()=>[m(a,{modelValue:C.value.publishStatus,"onUpdate:modelValue":t[2]||(t[2]=e=>C.value.publishStatus=e),"inline-prompt":"","active-text":"接收","inactive-text":"禁止","active-value":I.active,"inactive-value":I.inactive},null,8,["modelValue","active-value","inactive-value"])])),_:1}))])),_:1},8,["model"]),m(R,{style:{"max-width":"600px"}},{header:u((()=>[d("div",x,[g,m(V,{direction:"vertical",active:4,space:30},{default:u((()=>[m(f,null,{title:u((()=>[_])),_:1}),m(f,null,{title:u((()=>[w])),_:1}),m(f,null,{title:u((()=>[k])),_:1}),m(f,null,{title:u((()=>[z])),_:1})])),_:1})])])),default:u((()=>{var e,t;return[d("div",S,[C.value.wpSubscribeUrl?(r(),c(s,{key:0,id:"payQR",text:C.value.wpSubscribeUrl,size:248,colorDark:"#f76707",colorLight:"#ffffff",logoSrc:D.value},null,8,["text","logoSrc"])):n("",!0),!W.value&&(null==(e=U.value)?void 0:e.notify)?(r(),c(L,{key:1,icon:"success",title:"成功绑定"})):n("",!0),W.value||(null==(t=U.value)?void 0:t.notify)?n("",!0):(r(),c(L,{key:2,icon:"info",title:"请扫码绑定"}))])]})),_:1})])),_:1})])),_:1}),m(o,{style:{"margin-top":"30px"}},{default:u((()=>[m(B,{type:"primary",disabled:q.value,onClick:Q},{default:u((()=>[v("保存修改")])),_:1},8,["disabled"])])),_:1})])}}});export{U as default};
