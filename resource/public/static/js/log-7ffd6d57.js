import{u as e}from"./index-c06e60a9.js";import"./vue-echarts-11c03c89.js";import{a as s,e as r}from"./element-plus-961823fe.js";import"./store-52839c99.js";import"./index-4d43d044.js";import{i as o}from"./index.umd.min-b68308bb.js";import{f as t,h as i,a5 as p,a9 as a,o as m,V as l,W as n,g as j,X as c,_ as u}from"./@vue.runtime-core-dd57a9c9.js";import{r as d,M as h}from"./@vue.reactivity-9aee8bf6.js";import"./vue-router-17136280.js";import"./monaco-editor-c28fb00f.js";import"./axios-6b2fb661.js";import"./array.prototype.flat-eee42aa4.js";import"./define-properties-b1343066.js";import"./object-keys-e5f060db.js";import"./has-property-descriptors-6845433e.js";import"./get-intrinsic-cff09dfa.js";import"./has-symbols-a48c7173.js";import"./function-bind-cd5d7d08.js";import"./has-3a5c7287.js";import"./call-bind-cfba7623.js";import"./es-abstract-253c30b8.js";import"./has-proto-93b28181.js";import"./gopd-1516b43e.js";import"./is-regex-74a42cfc.js";import"./has-tostringtag-ad4fd641.js";import"./is-callable-99eeba16.js";import"./object-inspect-66cad57c.js";import"./es-to-primitive-6664914a.js";import"./is-date-object-d2231eea.js";import"./is-symbol-3a29a1ce.js";import"./safe-regex-test-183ad494.js";import"./es-shim-unscopables-89146e87.js";import"./nprogress-64657d8f.js";import"./lodash-es-8394daf0.js";import"./@vueuse.core-3c960f69.js";import"./@vueuse.shared-2b88397c.js";import"./pinia-efddbf44.js";import"./vue-demi-71ba0ef2.js";import"./mockjs-0b3ee9ca.js";import"./merge-4bdec194.js";import"./mitt-2d52b530.js";import"./clone-deep-53153407.js";import"./shallow-clone-d419fbda.js";import"./kind-of-d78bf752.js";import"./is-plain-object-40c8282f.js";import"./isobject-c886ab54.js";import"./@element-plus.icons-vue-15072d5d.js";import"./@vue.runtime-dom-0c977c95.js";import"./@vue.shared-dddd31b8.js";import"./resize-detector-2312ef2b.js";import"./echarts-e550b62f.js";import"./tslib-a4e99503.js";import"./zrender-f72fb7be.js";import"./@ctrl.tinycolor-d9b9bf03.js";import"./@popperjs.core-b696b006.js";import"./dayjs-89173748.js";import"./async-validator-ff95bfc9.js";import"./memoize-one-63ab667a.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui.dom-92665be4.js";import"./@floating-ui.core-c1b3624a.js";import"./vue-6d1d317a.js";const b=t({name:"sys-log"}),f=t({...b,setup(t){const{service:b}=e(),f=d(1),g=o.useCrud({service:b.base.sys.log},(e=>{e.refresh()})),v=o.useTable({contextMenu:["refresh"],columns:[{type:"index",label:"#",width:60},{prop:"userId",label:"用户ID"},{prop:"name",label:"昵称",minWidth:150},{prop:"action",label:"请求地址",minWidth:250,showOverflowTooltip:!0},{prop:"params",label:"参数",minWidth:200,showOverflowTooltip:!0},{prop:"ip",label:"ip",minWidth:150},{prop:"createTime",label:"创建时间",minWidth:160,sortable:"desc"}]});function y(){b.base.sys.log.setKeep({value:f.value}).then((()=>{s.success("保存成功")})).catch((e=>{s.error(e.message)}))}function x(){r.confirm("是否要清空日志？","提示",{type:"warning"}).then((()=>{b.base.sys.log.clear().then((()=>{var e;s.success("清空成功"),null==(e=g.value)||e.refresh()})).catch((e=>{s.error(e.message)}))})).catch((()=>null))}return i((()=>{b.base.sys.log.getKeep().then((e=>{f.value=Number(e)}))})),(e,s)=>{const r=p("cl-refresh-btn"),o=p("el-button"),t=p("el-input-number"),i=p("cl-filter"),d=p("cl-flex1"),w=p("cl-search-key"),_=p("cl-row"),k=p("cl-table"),W=p("cl-pagination"),z=p("cl-crud"),C=a("permission");return m(),l(z,{ref_key:"Crud",ref:g},{default:n((()=>[j(_,null,{default:n((()=>[j(r),c((m(),l(o,{type:"danger",onClick:x},{default:n((()=>[u(" 清空 ")])),_:1})),[[C,h(b).base.sys.log.permission.clear]]),j(i,{label:"日志保存天数"},{default:n((()=>[j(t,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=e=>f.value=e),"controls-position":"right",max:1e4,min:1,onChange:y},null,8,["modelValue"])])),_:1}),j(d),j(w,{placeholder:"搜索请求地址、参数、ip"})])),_:1}),j(_,null,{default:n((()=>[j(k,{ref_key:"Table",ref:v},null,512)])),_:1}),j(_,null,{default:n((()=>[j(d),j(W)])),_:1})])),_:1},512)}}});export{f as default};
