import{v as e}from"./@vue.runtime-dom-0c977c95.js";import{u as l}from"./index-c06e60a9.js";import"./vue-echarts-11c03c89.js";import{a,f as o}from"./element-plus-961823fe.js";import"./store-52839c99.js";import"./index-4d43d044.js";import{B as d,a5 as u,A as t}from"./@element-plus.icons-vue-15072d5d.js";import{f as m,h as i,a5 as s,o as r,c as p,g as c,W as n,_ as v,X as b,a as V,F as f,a3 as j}from"./@vue.runtime-core-dd57a9c9.js";import{r as h,h as y,M as _}from"./@vue.reactivity-9aee8bf6.js";import"./@vue.shared-dddd31b8.js";import"./vue-router-17136280.js";import"./monaco-editor-c28fb00f.js";import"./axios-6b2fb661.js";import"./array.prototype.flat-eee42aa4.js";import"./define-properties-b1343066.js";import"./object-keys-e5f060db.js";import"./has-property-descriptors-6845433e.js";import"./get-intrinsic-cff09dfa.js";import"./has-symbols-a48c7173.js";import"./function-bind-cd5d7d08.js";import"./has-3a5c7287.js";import"./call-bind-cfba7623.js";import"./es-abstract-253c30b8.js";import"./has-proto-93b28181.js";import"./gopd-1516b43e.js";import"./is-regex-74a42cfc.js";import"./has-tostringtag-ad4fd641.js";import"./is-callable-99eeba16.js";import"./object-inspect-66cad57c.js";import"./es-to-primitive-6664914a.js";import"./is-date-object-d2231eea.js";import"./is-symbol-3a29a1ce.js";import"./safe-regex-test-183ad494.js";import"./es-shim-unscopables-89146e87.js";import"./nprogress-64657d8f.js";import"./lodash-es-8394daf0.js";import"./@vueuse.core-3c960f69.js";import"./@vueuse.shared-2b88397c.js";import"./pinia-efddbf44.js";import"./vue-demi-71ba0ef2.js";import"./mockjs-0b3ee9ca.js";import"./merge-4bdec194.js";import"./mitt-2d52b530.js";import"./clone-deep-53153407.js";import"./shallow-clone-d419fbda.js";import"./kind-of-d78bf752.js";import"./is-plain-object-40c8282f.js";import"./isobject-c886ab54.js";import"./resize-detector-2312ef2b.js";import"./echarts-e550b62f.js";import"./tslib-a4e99503.js";import"./zrender-f72fb7be.js";import"./@ctrl.tinycolor-d9b9bf03.js";import"./@popperjs.core-b696b006.js";import"./dayjs-89173748.js";import"./async-validator-ff95bfc9.js";import"./memoize-one-63ab667a.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui.dom-92665be4.js";import"./@floating-ui.core-c1b3624a.js";const g={class:"view-my"},U={class:"box-con"},x={class:"box-list"},w={class:"box-col"},K={style:{padding:"10px 0 10px 0"}},I={class:"del"},N={class:"add"},k=m({name:"base-setting"}),S=m({...k,setup(m){const{service:k}=l(),S=h([1,2]),A=h({}),C=y({active:1,inactiv:0}),P=h(!1),M=h(),T=h([{contactName:"",imgUrl:""}]),z=()=>{T.value.push({contactName:"",imgUrl:""})},E=e=>{T.value[T.value.length-1].imgUrl=e.url,P.value=!1,M.value.close()},L=h(0),R=()=>{P.value=!1,A.value.contactList=T.value,k.base.sys.setting.update({id:1,...A.value}).then((()=>{a.success("更新成功")}))};return i((()=>{(async()=>{A.value=await k.base.sys.setting.info({id:1}),T.value=A.value.contactList?JSON.parse(A.value.contactList):T.value})()})),(l,m)=>{const i=s("el-input"),h=s("el-form-item"),y=s("cl-upload"),k=s("el-form"),D=s("el-tab-pane"),B=s("el-radio"),F=s("el-radio-group"),J=s("el-button"),W=s("el-card"),X=s("el-input-number"),q=s("el-switch"),G=s("el-tabs");return r(),p("div",g,[c(G,{type:"border-card"},{default:n((()=>[c(D,{label:"基本信息"},{default:n((()=>[c(k,{class:"card-form","label-width":"160px",model:A.value,disabled:P.value},{default:n((()=>[c(h,{label:"站点名称"},{default:n((()=>[c(i,{modelValue:A.value.siteName,"onUpdate:modelValue":m[0]||(m[0]=e=>A.value.siteName=e),placeholder:"请填写站点名称",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"Logo"},{default:n((()=>[c(y,{modelValue:A.value.logo,"onUpdate:modelValue":m[1]||(m[1]=e=>A.value.logo=e),text:"Logo",type:"image"},null,8,["modelValue"])])),_:1}),c(h,{label:"联系人"},{default:n((()=>[c(i,{modelValue:A.value.contact,"onUpdate:modelValue":m[2]||(m[2]=e=>A.value.contact=e),placeholder:"请填写联系人",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"手机号码"},{default:n((()=>[c(i,{modelValue:A.value.mobile,"onUpdate:modelValue":m[3]||(m[3]=e=>A.value.mobile=e),placeholder:"请填写手机号码",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"版权所有"},{default:n((()=>[c(i,{modelValue:A.value.copyright,"onUpdate:modelValue":m[4]||(m[4]=e=>A.value.copyright=e),placeholder:"请填写版权所有",clearable:"",type:"textarea",rows:4},null,8,["modelValue"])])),_:1})])),_:1},8,["model","disabled"])])),_:1}),c(D,{label:"公众号"},{default:n((()=>[c(k,{class:"card-form","label-width":"160px",model:A.value,disabled:P.value},{default:n((()=>[c(h,{label:"公众号名称"},{default:n((()=>[c(i,{modelValue:A.value.mpName,"onUpdate:modelValue":m[5]||(m[5]=e=>A.value.mpName=e),placeholder:"请填写公众号名称",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"公众号appId"},{default:n((()=>[c(i,{modelValue:A.value.wxAppId,"onUpdate:modelValue":m[6]||(m[6]=e=>A.value.wxAppId=e),placeholder:"请填写公众号app_id",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"微信secret"},{default:n((()=>[c(i,{modelValue:A.value.wxSecret,"onUpdate:modelValue":m[7]||(m[7]=e=>A.value.wxSecret=e),placeholder:"请填写微信secret",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","disabled"])])),_:1}),c(D,{label:"支付"},{default:n((()=>[c(k,{class:"card-form","label-width":"160px",model:A.value,disabled:P.value},{default:n((()=>[c(h,{label:"模式"},{default:n((()=>[c(F,{modelValue:A.value.payType,"onUpdate:modelValue":m[8]||(m[8]=e=>A.value.payType=e),class:"ml-4"},{default:n((()=>[c(B,{label:S.value[0],size:"large"},{default:n((()=>[v(" 普通商户模式 ")])),_:1},8,["label"]),c(B,{label:S.value[1],size:"large"},{default:n((()=>[v(" 服务商模式 ")])),_:1},8,["label"])])),_:1},8,["modelValue"])])),_:1}),b(V("div",null,[c(h,{label:"普通商户号"},{default:n((()=>[c(i,{modelValue:A.value.wxPayMchId,"onUpdate:modelValue":m[9]||(m[9]=e=>A.value.wxPayMchId=e),placeholder:"请填写普通商户号",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"普通商户appid"},{default:n((()=>[c(i,{modelValue:A.value.wxPayAppid,"onUpdate:modelValue":m[10]||(m[10]=e=>A.value.wxPayAppid=e),placeholder:"请填写普通商户appid",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"收款商户v3密钥"},{default:n((()=>[c(i,{modelValue:A.value.cAPIv3Key,"onUpdate:modelValue":m[11]||(m[11]=e=>A.value.cAPIv3Key=e),placeholder:"请填写收款商户v3密钥",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"序列号"},{default:n((()=>[c(i,{modelValue:A.value.cSerialNo,"onUpdate:modelValue":m[12]||(m[12]=e=>A.value.cSerialNo=e),placeholder:"请填写序列号",clearable:""},null,8,["modelValue"])])),_:1})],512),[[e,1==A.value.payType]]),b(V("div",null,[c(h,{label:"服务商商户号"},{default:n((()=>[c(i,{modelValue:A.value.spMchid,"onUpdate:modelValue":m[13]||(m[13]=e=>A.value.spMchid=e),placeholder:"请填写服务商商户号",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"服务商appid"},{default:n((()=>[c(i,{modelValue:A.value.spAppid,"onUpdate:modelValue":m[14]||(m[14]=e=>A.value.spAppid=e),placeholder:"请填写服务商appid",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"特约商户"},{default:n((()=>[c(i,{modelValue:A.value.subMchId,"onUpdate:modelValue":m[15]||(m[15]=e=>A.value.subMchId=e),placeholder:"请填写特约商户",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"收款商户v3密钥"},{default:n((()=>[c(i,{modelValue:A.value.aPIv3Key,"onUpdate:modelValue":m[16]||(m[16]=e=>A.value.aPIv3Key=e),placeholder:"请填写收款商户v3密钥",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"序列号"},{default:n((()=>[c(i,{modelValue:A.value.serialNo,"onUpdate:modelValue":m[17]||(m[17]=e=>A.value.serialNo=e),placeholder:"请填写序列号",clearable:""},null,8,["modelValue"])])),_:1})],512),[[e,2==A.value.payType]]),c(h,{label:"支付回调地址"},{default:n((()=>[c(i,{modelValue:A.value.notifyUrl,"onUpdate:modelValue":m[18]||(m[18]=e=>A.value.notifyUrl=e),placeholder:"请填写支付回调地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","disabled"])])),_:1}),c(D,{label:"翻译"},{default:n((()=>[c(k,{class:"card-form","label-width":"160px",model:A.value,disabled:P.value},{default:n((()=>[c(h,{label:"百度apiKey"},{default:n((()=>[c(i,{modelValue:A.value.baiduTranApiKey,"onUpdate:modelValue":m[19]||(m[19]=e=>A.value.baiduTranApiKey=e),placeholder:"请填写百度apiKey",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"百度secretKey"},{default:n((()=>[c(i,{modelValue:A.value.baiduTranSecretKey,"onUpdate:modelValue":m[20]||(m[20]=e=>A.value.baiduTranSecretKey=e),placeholder:"请填写百度secretKey",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","disabled"])])),_:1}),c(D,{label:"客服"},{default:n((()=>[V("div",U,[V("div",x,[(r(!0),p(f,null,j(T.value,((e,l)=>(r(),p("div",{class:"box-item",key:l},[c(W,{style:{"margin-bottom":"30px"}},{default:n((()=>[V("div",w,[c(i,{modelValue:e.contactName,"onUpdate:modelValue":l=>e.contactName=l,placeholder:"请填写客服名称",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),V("div",K,[c(y,{text:"选择图片",modelValue:e.imgUrl,"onUpdate:modelValue":l=>e.imgUrl=l,onSuccess:E},{default:n((()=>[c(J,{icon:_(u),onClick:e=>(e=>{M.value=o.service({lock:!0,text:"上传中",background:"rgba(0, 0, 0, 0.7)"}),P.value=!0,L.value=e})(l)},{default:n((()=>[v("上传")])),_:2},1032,["icon","onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue"])]),V("div",I,[c(J,{type:"danger",icon:_(t),onClick:e=>(e=>{1==T.value.length?a.warning("至少保留一个"):T.value.splice(e,1)})(l)},{default:n((()=>[v("删除")])),_:2},1032,["icon","onClick"])])])])),_:2},1024)])))),128))]),V("div",N,[c(J,{type:"info",icon:_(d),onClick:z},{default:n((()=>[v("增加一个")])),_:1},8,["icon"])])])])),_:1}),c(D,{label:"通知配置"},{default:n((()=>[c(k,{"label-width":"100px",model:A.value,disabled:P.value},{default:n((()=>[c(G,{"model-value":"basicConfig"},{default:n((()=>[c(D,{label:"通知设置",name:"basicConfig"},{default:n((()=>[c(h,{label:"到期天数提醒"},{default:n((()=>[c(X,{modelValue:A.value.remindDay,"onUpdate:modelValue":m[21]||(m[21]=e=>A.value.remindDay=e),placeholder:"提前天数",min:1,max:100,"controls-position":"right"},null,8,["modelValue"])])),_:1}),c(h,{label:"到期邮件提醒"},{default:n((()=>[c(q,{modelValue:A.value.isRemindEmail,"onUpdate:modelValue":m[22]||(m[22]=e=>A.value.isRemindEmail=e),"active-value":C.active,"inactiv-value":C.inactiv},null,8,["modelValue","active-value","inactiv-value"])])),_:1}),c(h,{label:"到期短信提醒"},{default:n((()=>[c(q,{modelValue:A.value.isRemindSms,"onUpdate:modelValue":m[23]||(m[23]=e=>A.value.isRemindSms=e),"active-value":C.active,"inactiv-value":C.inactiv},null,8,["modelValue","active-value","inactiv-value"])])),_:1})])),_:1}),c(D,{label:"邮件设置",name:"emailConfig"},{default:n((()=>[c(h,{label:"发送邮箱"},{default:n((()=>[c(i,{modelValue:A.value.smtpEmail,"onUpdate:modelValue":m[24]||(m[24]=e=>A.value.smtpEmail=e),placeholder:"请填写发送邮箱",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"smtp"},{default:n((()=>[c(i,{modelValue:A.value.smtp,"onUpdate:modelValue":m[25]||(m[25]=e=>A.value.smtp=e),placeholder:"请填写smtp",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"邮箱授权码"},{default:n((()=>[c(i,{modelValue:A.value.smtpPass,"onUpdate:modelValue":m[26]||(m[26]=e=>A.value.smtpPass=e),placeholder:"请填写邮箱授权码",type:"password",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"接收邮箱"},{default:n((()=>[c(i,{modelValue:A.value.remindEmail,"onUpdate:modelValue":m[27]||(m[27]=e=>A.value.remindEmail=e),placeholder:"请填写接收邮箱",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),c(D,{label:"短信设置",name:"second"},{default:n((()=>[c(h,{label:"accessKeyId"},{default:n((()=>[c(i,{modelValue:A.value.accessKeyId,"onUpdate:modelValue":m[28]||(m[28]=e=>A.value.accessKeyId=e),placeholder:"请填写accessKeyId",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"keySecret"},{default:n((()=>[c(i,{modelValue:A.value.accessKeySecret,"onUpdate:modelValue":m[29]||(m[29]=e=>A.value.accessKeySecret=e),placeholder:"请填写keySecret",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"签名"},{default:n((()=>[c(i,{modelValue:A.value.signName,"onUpdate:modelValue":m[30]||(m[30]=e=>A.value.signName=e),placeholder:"请填写签名",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"模板"},{default:n((()=>[c(i,{modelValue:A.value.templateCode,"onUpdate:modelValue":m[31]||(m[31]=e=>A.value.templateCode=e),placeholder:"请填写模板",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"endpoint"},{default:n((()=>[c(i,{modelValue:A.value.endpoint,"onUpdate:modelValue":m[32]||(m[32]=e=>A.value.endpoint=e),placeholder:"请填写endpoint",clearable:""},null,8,["modelValue"])])),_:1}),c(h,{label:"通知手机"},{default:n((()=>[c(i,{modelValue:A.value.remindMobile,"onUpdate:modelValue":m[33]||(m[33]=e=>A.value.remindMobile=e),placeholder:"请填写通知手机",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","disabled"])])),_:1})])),_:1}),c(h,{style:{"margin-top":"30px"}},{default:n((()=>[c(J,{type:"primary",disabled:P.value,onClick:R},{default:n((()=>[v("保存修改")])),_:1},8,["disabled"])])),_:1})])}}});export{S as default};
