import{Q as e}from"./quill-8850dc38.js";import{p as o}from"./index-4d43d044.js";import{f as t,A as i,h as r,a5 as s,o as a,c as l,a as n,g as d}from"./@vue.runtime-core-dd57a9c9.js";import{r as m}from"./@vue.reactivity-9aee8bf6.js";import{_ as p}from"./vue-qr-c4264fa6.js";import{D as c}from"./@vue.shared-dddd31b8.js";import"./array.prototype.flat-eee42aa4.js";import"./define-properties-b1343066.js";import"./object-keys-e5f060db.js";import"./has-property-descriptors-6845433e.js";import"./get-intrinsic-cff09dfa.js";import"./has-symbols-a48c7173.js";import"./function-bind-cd5d7d08.js";import"./has-3a5c7287.js";import"./call-bind-cfba7623.js";import"./es-abstract-253c30b8.js";import"./has-proto-93b28181.js";import"./gopd-1516b43e.js";import"./is-regex-74a42cfc.js";import"./has-tostringtag-ad4fd641.js";import"./is-callable-99eeba16.js";import"./object-inspect-66cad57c.js";import"./es-to-primitive-6664914a.js";import"./is-date-object-d2231eea.js";import"./is-symbol-3a29a1ce.js";import"./safe-regex-test-183ad494.js";import"./es-shim-unscopables-89146e87.js";import"./store-52839c99.js";import"./lodash-es-8394daf0.js";import"./js-binary-schema-parser-814ef804.js";const u=t({name:"cl-editor-quill",props:{modelValue:null,options:Object,height:{type:[String,Number],default:400},disabled:Boolean},emits:["update:modelValue","load"],setup(t,{emit:s}){let a=null;const l=m(),n=m(),d=m(),p=m(""),c=m(0);function u(e){if(t.disabled)return!1;const o=a.getSelection();o&&(c.value=o.index),"image"==e?n.value.open():"video"==e&&d.value.open()}function j(e){a.root.innerHTML=e||""}return i((()=>t.modelValue),(e=>{e?e!==p.value&&j(e):j("")})),r((function(){a=new e(l.value,{theme:"snow",placeholder:"输入内容",modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","video","image"]]},...t.options}),a.getModule("toolbar").addHandler("image",(()=>{u("image")})),a.getModule("toolbar").addHandler("video",(()=>{u("video")})),a.on("text-change",(()=>{p.value=a.root.innerHTML,s("update:modelValue",p.value)})),j(t.modelValue),a.container.style.height=o(t.height),a.enable(!t.disabled),s("load",a)})),{Editor:l,ImageSpace:n,VideoSpace:d,content:p,quill:a,cursorIndex:c,setContent:j,onFileConfirm:function(o){o.length>0&&(o.forEach(((o,t)=>{"image"==o.type&&a.insertEmbed(c.value+t,o.type,o.url,e.sources.USER)})),a.setSelection(c.value+o.length))}}}}),j={ref:"Editor",class:"editor"};const b=p(u,[["render",function(e,o,t,i,r,m){const p=s("cl-upload-space");return a(),l("div",{class:c(["cl-editor-quill",{disabled:e.disabled}])},[n("div",j,null,512),d(p,{ref:"ImageSpace",accept:"image/*","show-btn":!1,onConfirm:e.onFileConfirm},null,8,["onConfirm"]),d(p,{ref:"VideoSpace",accept:"video/*","show-btn":!1,onConfirm:e.onFileConfirm},null,8,["onConfirm"])],2)}],["__scopeId","data-v-3a586c5d"]]);export{b as default};
