import{i as e}from"./index.umd.min-b68308bb.js";import{u as l,d as t}from"./index-c06e60a9.js";import"./vue-echarts-11c03c89.js";import{e as o,a as r,d as a}from"./element-plus-961823fe.js";import"./store-52839c99.js";import{a as s,r as n}from"./index-4d43d044.js";import{u as i}from"./component-942ac5f4.js";import{w as u}from"./@vue.runtime-dom-0c977c95.js";import{y as p,B as c,a9 as d,E as m}from"./@element-plus.icons-vue-15072d5d.js";import{f as v,h as f,a5 as j,o as b,c as h,g as _,W as y,a as g,_ as k,F as I,a9 as w,V as x,Z as V,X as C,a3 as T,aT as U,aS as R,A as F}from"./@vue.runtime-core-dd57a9c9.js";import{r as P,h as M,M as O}from"./@vue.reactivity-9aee8bf6.js";import{D as q,ak as z}from"./@vue.shared-dddd31b8.js";import{_ as W}from"./vue-qr-c4264fa6.js";import"./array.prototype.flat-eee42aa4.js";import"./define-properties-b1343066.js";import"./object-keys-e5f060db.js";import"./has-property-descriptors-6845433e.js";import"./get-intrinsic-cff09dfa.js";import"./has-symbols-a48c7173.js";import"./function-bind-cd5d7d08.js";import"./has-3a5c7287.js";import"./call-bind-cfba7623.js";import"./es-abstract-253c30b8.js";import"./has-proto-93b28181.js";import"./gopd-1516b43e.js";import"./is-regex-74a42cfc.js";import"./has-tostringtag-ad4fd641.js";import"./is-callable-99eeba16.js";import"./object-inspect-66cad57c.js";import"./es-to-primitive-6664914a.js";import"./is-date-object-d2231eea.js";import"./is-symbol-3a29a1ce.js";import"./safe-regex-test-183ad494.js";import"./es-shim-unscopables-89146e87.js";import"./vue-6d1d317a.js";import"./vue-router-17136280.js";import"./monaco-editor-c28fb00f.js";import"./axios-6b2fb661.js";import"./nprogress-64657d8f.js";import"./lodash-es-8394daf0.js";import"./@vueuse.core-3c960f69.js";import"./@vueuse.shared-2b88397c.js";import"./pinia-efddbf44.js";import"./vue-demi-71ba0ef2.js";import"./mockjs-0b3ee9ca.js";import"./merge-4bdec194.js";import"./mitt-2d52b530.js";import"./clone-deep-53153407.js";import"./shallow-clone-d419fbda.js";import"./kind-of-d78bf752.js";import"./is-plain-object-40c8282f.js";import"./isobject-c886ab54.js";import"./resize-detector-2312ef2b.js";import"./echarts-e550b62f.js";import"./tslib-a4e99503.js";import"./zrender-f72fb7be.js";import"./@ctrl.tinycolor-d9b9bf03.js";import"./@popperjs.core-b696b006.js";import"./dayjs-89173748.js";import"./async-validator-ff95bfc9.js";import"./memoize-one-63ab667a.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui.dom-92665be4.js";import"./@floating-ui.core-c1b3624a.js";import"./js-binary-schema-parser-814ef804.js";const B={style:{width:"100%",display:"inline-flex","flex-direction":"row","align-items":"self-start"}},N={style:{"min-height":"110px",height:"400px"}},S=v({name:"projectRole"}),$=v({...S,props:{projectRoleItem:{type:Object,default:()=>{}}},setup(t){const a=t,{service:s}=l(),n=P(1),i=P(!1),u=P([]),p=P([]),c=async e=>{if(""!==e){i.value=!0;const l=await s.customer_pro.kf.getList({keyWord:e});i.value=!1,p.value=l.map((e=>({label:e.name,value:e.id})))}},d=e.useTable({columns:[{label:"姓名",prop:"name",width:250},{label:"接收",prop:"status",component:{name:"cl-switch",props:{activeValue:1,inactiveValue:0,activeText:"开启",inactiveText:"关闭",inlinePrompt:!0}}},{type:"op",buttons:["delete"]}]}),m=e.useCrud({service:s.customer_pro.kf,async onRefresh(e,{render:l}){const t=await s.customer_pro.kf.list({role:3,projectId:a.projectRoleItem.id});c(),l(t)},onDelete(e){o.confirm("此操作将永久删除选中数据，是否继续？","提示",{type:"error"}).then((()=>{s.customer_pro.project.delProjectRole({projectId:a.projectRoleItem.id,userIds:e.map((e=>e.userId))}).then((()=>{v(),r.success("删除成功")})).catch((e=>{r.error(e.message)}))})).catch((e=>null))}}),v=()=>{var e;null==(e=m.value)||e.refresh()},w=async()=>{i.value=!0,await s.customer_pro.project.addProjectRole({projectId:a.projectRoleItem.id,userIds:u.value}),i.value=!1,v(),u.value=[],r.success("添加成功")},x=P();return f((()=>{(async()=>{var e;x.value=await s.customer_pro.basic.info({id:1}),(null==(e=x.value)?void 0:e.projectMultiManger)&&(n.value=0)})(),v()})),(e,l)=>{const t=j("el-select-v2"),o=j("el-form-item"),r=j("el-button"),a=j("el-form"),s=j("cl-table"),v=j("cl-row"),f=j("cl-crud");return b(),h(I,null,[_(a,{ref:"formRef",inline:!0,"label-width":"auto"},{default:y((()=>[g("div",B,[_(o,{label:"项目主管",prop:"id",style:{width:"90%"}},{default:y((()=>[_(t,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=e=>u.value=e),remote:"","remote-method":c,clearable:"",options:p.value,loading:i.value,placeholder:"请输入项目主管",multiple:"",multipleLimit:n.value,filterable:""},null,8,["modelValue","options","loading","multipleLimit"])])),_:1}),_(r,{type:"success",loading:i.value,onClick:w},{default:y((()=>[k("添加")])),_:1},8,["loading"])])])),_:1},512),g("div",N,[_(f,{ref_key:"Crud",ref:m},{default:y((()=>[_(v,null,{default:y((()=>[_(s,{ref_key:"Table",ref:d},null,512)])),_:1})])),_:1},512)])],64)}}}),G={class:"dept-tree"},L={class:"dept-tree__header"},A=(e=>(U("data-v-4812c569"),e=e(),R(),e))((()=>g("div",null,"项目类型",-1))),D=["onContextmenu"],K={class:"dept-tree__node"},E=["onClick"],X=["onClick"],Z={style:{display:"flex","flex-direction":"row","justify-content":"space-between"}},H=v({name:"project-tree"}),J=W(v({...H,props:{drag:{type:Boolean,default:!0},level:{type:Number,default:99},orderInfo:Object},emits:["refresh"],setup(a,{expose:v,emit:k}){const U=a,{service:R,browser:F}=l(),{ViewGroup:W}=i(),B=e.useForm();P({});const N=P({}),S=P(0),H=P({active:1,inactive:0}),J=P([]);M({status:1});const Q=P([{name:"全部",value:"all"}]),Y=P(!1),ee=P(!1);function le({data:e}){return e.parentId}function te(e,l){return l.data.parentId}async function oe(){Y.value=!0,ee.value=!1,await R.customer_pro.project.list().then((e=>{var l,t;Q.value=s(e),(null==(l=W.value)?void 0:l.selected)?re(null==(t=W.value)?void 0:t.selected):re()})),Y.value=!1}function re(e){var l,t;if(e||(e=Q.value[0]),e){const o=e.children?n(e.children).map((e=>e.id)):[];o.unshift(e.id),k("refresh",{page:1,projectIds:o}),null==(l=W.value)||l.select(e),null==(t=W.value)||t.setTitle(`${e.name} - 客服组列表 ${e.projectUserId?"-【项目主管："+e.projectUserName+"】":""}`)}}const ae=P("update");function se(e){var l;const t=e.id?"update":"add";ae.value=t,null==(l=B.value)||l.open({title:("add"==t?"新增":"编辑")+"项目",width:"550px",props:{labelWidth:"100px"},items:[{label:"项目名称",prop:"name",component:{name:"el-input"},required:!0}],form:{...e},on:{async open(e){},submit(l,{done:o,close:a}){R.customer_pro.project[t]({id:e.id,name:l.name}).then((()=>{r.success(`${"add"==t?"新增":"编辑"}项目 “${l.name}” 成功`),a(),oe()})).catch((e=>{r.error(e.message),o()}))}}})}function ne(e){o.confirm(`该操作会删除 “${e.name}” 项目的所有组别，是否确认？`,"提示",{type:"warning",confirmButtonText:"直接删除",cancelButtonText:"关闭",distinguishCancelAndClose:!0}).then((()=>{!async function(l){await R.customer_pro.project.delete({ids:[e.id],deleteUser:l}).then((()=>{var t,a;(null==(a=null==(t=W.value)?void 0:t.selected)?void 0:a.id)==e.id&&re(),l?r.success("删除成功"):o.confirm(`“${e.name}” 项目的组别已成功转移到 “${e.parentName}” 项目。`,"删除成功"),oe()})).catch((e=>{r.error(e.message)}))}(!0)}))}function ie(l,o,r){o||(o=Q.value[0]||{});const a=R.customer_pro.project.permission,s=R.customer_pro.kf.permission;e.ContextMenu.open(l,{list:[{label:"新增项目",hidden:r&&r.level>=U.level||!t(a.add),callback(e){se({name:"",parentName:o.name,parentId:o.id}),e()}},{label:"编辑项目",hidden:!t(a.update),callback(e){se(o),e()}},{label:"删除项目",hidden:!t(a.delete),callback(e){ne(o),e()}},{label:"设置项目主管",hidden:!t(s.setProjectRole),callback(e){me(o),e()}}]})}function ue(){se({name:"",parentName:void 0,parentId:void 0})}async function pe(){var e,l;se(await R.customer_pro.project.info({id:null==(l=null==(e=W.value)?void 0:e.selected)?void 0:l.id}))}const ce=P(!1),de=P(),me=e=>{de.value=e,ce.value=!0},ve=e=>{"update"==ae.value&&(S.value=N.value[e])};return f((function(){oe()})),v({refresh:oe}),(e,l)=>{const t=j("el-button"),o=j("el-icon"),r=j("el-tree"),a=j("el-scrollbar"),s=j("el-option"),n=j("el-select"),i=j("el-switch"),v=j("cl-form"),f=j("cl-dialog"),k=w("loading");return b(),h("div",G,[g("div",L,[A,O(R).customer_pro.project._permission.list?(b(),x(t,{key:0,size:"small",onClick:oe,icon:O(p),circle:""},null,8,["icon"])):V("",!0),O(R).customer_pro.project._permission.add?(b(),x(t,{key:1,size:"small",onClick:ue,icon:O(c),circle:""},null,8,["icon"])):V("",!0),O(R).customer_pro.project._permission.update?(b(),x(t,{key:2,size:"small",onClick:pe,icon:O(d),circle:""},null,8,["icon"])):V("",!0)]),g("div",{class:"dept-tree__container",onContextmenu:u(ie,["stop","prevent"])},[_(a,null,{default:y((()=>[C((b(),x(r,{"node-key":"id","default-expand-all":"",data:Q.value,props:{label:"name"},draggable:ee.value,"allow-drag":le,"allow-drop":te,"expand-on-click-node":!1,onNodeContextmenu:ie},{default:y((({node:e,data:l})=>{var t,r;return[g("div",K,[g("span",{class:q(["dept-tree__node-label",{"is-active":l.id==(null==(r=null==(t=O(W))?void 0:t.selected)?void 0:r.id)}]),onClick:e=>re(l)},z(e.label),11,E),O(F).isMini?(b(),h("span",{key:0,class:"dept-tree__node-icon",onClick:t=>ie(t,l,e)},[_(o,null,{default:y((()=>[_(O(m))])),_:1})],8,X)):V("",!0)])]})),_:1},8,["data","draggable"])),[[k,Y.value]])])),_:1})],40,D),_(v,{ref_key:"Form",ref:B},{"slot-projectUserId":y((({scope:e})=>[g("div",Z,[_(n,{modelValue:e.projectUserId,"onUpdate:modelValue":l=>e.projectUserId=l,filterable:"",placeholder:"选择成员",style:{width:"80%"},onChange:ve,disabled:!!e.projectUserId},{default:y((()=>[(b(!0),h(I,null,T(J.value,(e=>(b(),x(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","disabled"]),_(i,{modelValue:S.value,"onUpdate:modelValue":l[0]||(l[0]=e=>S.value=e),"inline-prompt":"","active-text":"推送","inactive-text":"关闭","active-value":H.value.active,"inactive-value":H.value.inactive},null,8,["modelValue","active-value","inactive-value"])])])),_:1},512),_(f,{title:"设置项目主管",modelValue:ce.value,"onUpdate:modelValue":l[1]||(l[1]=e=>ce.value=e)},{default:y((()=>[_($,{projectRoleItem:de.value},null,8,["projectRoleItem"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-4812c569"]]),Q={class:"dept-move"},Y=v({name:"kf-move"}),ee=v({...Y,setup(t,{expose:a}){const{service:s}=l(),n=e.useForm(),i=e.useCrud();const u=P(),p=P(),c=e=>{var l,t;m.value=[],null==(l=n.value)||l.setForm("groupId",null),null==(t=n.value)||t.setForm("servicesId",null),p.value=e,v(e)},d=e=>{var l;null==(l=n.value)||l.setForm("servicesId",null)},m=P(),v=async e=>{m.value=await s.customer_pro.project_group.list({projectId:e})};return a({open:async function(e){var l,t;m.value=[],null==(l=n.value)||l.setForm("group_id",null),u.value=await s.customer_pro.project.list(),null==(t=n.value)||t.open({title:"组别转移",width:"500px",props:{labelWidth:"80px"},items:[{label:"项目",prop:"projectId",component:{name:"slot-projectId"},required:!0},{label:"客服组",prop:"groupId",component:{name:"slot-groupId"},required:!0}],on:{submit(l,{done:t,close:a}){if(!l.projectId)return r.warning("请选择项目"),t();o.confirm("转移到新项目，组内客服列表也会一起迁移，也会影响分配队列，是否继续？","提示",{type:"warning"}).then((()=>{s.customer_pro.project_group.move({...l,ids:e}).then((()=>{var e;r.success("转移成功"),null==(e=i.value)||e.refresh(),a()})).catch((e=>{r.error(e.message),t()}))})).catch((()=>null))}}})}}),(e,l)=>{const t=j("el-option"),o=j("el-select"),r=j("cl-form");return b(),h("div",Q,[_(r,{ref_key:"Form",ref:n},{"slot-projectId":y((({scope:e})=>[_(o,{modelValue:e.projectId,"onUpdate:modelValue":l=>e.projectId=l,onChange:c},{default:y((()=>[(b(!0),h(I,null,T(u.value,(e=>(b(),x(t,{key:e.value,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),"slot-groupId":y((({scope:e})=>[_(o,{modelValue:e.groupId,"onUpdate:modelValue":l=>e.groupId=l,onChange:d},{default:y((()=>[(b(!0),h(I,null,T(m.value,(e=>(b(),x(t,{key:e.value,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1},512)])}}}),le={key:0},te={key:1},oe=g("span",{style:{color:"#e74c3c"}}," 【组主管】 ",-1),re={key:2},ae=g("span",{style:{color:"#e74c3c"}}," 【项目主管】 ",-1),se={key:0},ne=v({name:"subkf"}),ie=v({...ne,props:{groupId:String,projectId:String},setup(t){const o=t,{service:a,refs:s,setRefs:n}=l(),i=P({}),u=e.useUpsert({items:[{label:"客服名称",prop:"userId",required:!0,component:{name:"el-select"}},{label:"备注",prop:"remark",component:{name:"el-input",props:{type:"textarea",rows:4}}},{label:"推送",prop:"status",value:1,component:{name:"cl-switch",props:{activeValue:1,inactiveValue:0,activeText:"开启",inactiveText:"关闭",inlinePrompt:!0}}}],async onOpen(e){var l,t,o,r,s,n;"update"==(null==(l=u.value)?void 0:l.mode)?null==(t=u.value)||t.setProps("userId",{disabled:!0}):null==(o=u.value)||o.setProps("userId",{disabled:!1}),null==(r=u.value)||r.setOptions("userId",[]);const p=await a.customer_pro.kf.getList({roleId:"1815245038695747584",userId:e.userId,mode:null==(s=u.value)?void 0:s.mode,type:"group"});null==(n=u.value)||n.setOptions("userId",p.map((e=>(i.value[e.id]=e.name,{label:e.name,value:e.id}))))},onSubmit(e,{next:l}){let t={groupId:o.groupId,projectId:o.projectId,name:i.value[e.userId]};l({...e,...t})}}),p=e.useTable({columns:[{type:"selection"},{label:"客服名称",prop:"name"},{label:"接收推送",prop:"status",component:{name:"cl-switch",props:{activeValue:1,inactiveValue:0,activeText:"接收",inactiveText:"禁用",inlinePrompt:!0}}},{label:"备注",prop:"remark",minWidth:150,showOverflowTooltip:!0},{label:"创建时间",prop:"createTime"},{type:"op",width:400,buttons:["edit","slot-set_Gadmin"]}]}),c=e.useCrud({service:a.customer_pro.kf,async onRefresh(e,{next:l,render:t}){e.projectId=o.projectId,e.groupId=o.groupId;const{list:r,pagination:a}=await l(e);t(r,a)}},(e=>{e.refresh()})),d=(e,l,t)=>{a.customer_pro.kf.setProjectRole({action:l,role:t,id:e.id,userId:e.userId,projectId:e.projectId,groupId:e.groupId,type:"group"}).then((e=>{var l;r.success("设置成功"),null==(l=c.value)||l.refresh()})).catch((e=>{r.error(e.message)}))};return(e,l)=>{const t=j("cl-refresh-btn"),o=j("cl-add-btn"),r=j("cl-multi-delete-btn"),i=j("el-button"),m=j("cl-flex1"),v=j("cl-search-key"),f=j("cl-row"),g=j("cl-table"),I=j("cl-pagination"),T=j("cl-upsert"),U=j("cl-crud"),R=w("permission");return b(),x(U,{ref_key:"Crud",ref:c},{default:y((()=>[_(f,null,{default:y((()=>{var e;return[_(t),_(o),_(r),C((b(),x(i,{type:"success",disabled:0==(null==(e=O(p))?void 0:e.selection.length),onClick:l[0]||(l[0]=e=>async function(e){var l;let t=[];t=e?[e.id]:(null==(l=p.value)?void 0:l.selection.map((e=>e.id)))||[],s.kfMove.open(t)}())},{default:y((()=>[k("转移")])),_:1},8,["disabled"])),[[R,O(a).customer_pro.project_group.permission.move]]),_(m),_(v)]})),_:1}),_(f,null,{default:y((()=>[_(g,{ref_key:"Table",ref:p,border:!1},{"column-name":y((({scope:e})=>[1==e.row.role?(b(),h("span",le,z(e.row.name),1)):V("",!0),2==e.row.role?(b(),h("span",te,[k(z(e.row.name)+" - ",1),oe])):V("",!0),3==e.row.role?(b(),h("span",re,[k(z(e.row.name)+" - ",1),ae])):V("",!0)])),"slot-set_Gadmin":y((({scope:e})=>[O(a).customer_pro.kf._permission.setProjectRole?(b(),h("div",se,[1==e.row.role?(b(),x(i,{key:0,text:"",plain:"",type:"warning",onClick:l=>d(e.row,!0,2)},{default:y((()=>[k("设为组主管")])),_:2},1032,["onClick"])):V("",!0),2==e.row.role?(b(),x(i,{key:1,text:"",plain:"",type:"info",onClick:l=>d(e.row,!1,2)},{default:y((()=>[k("取消组主管")])),_:2},1032,["onClick"])):V("",!0)])):V("",!0)])),_:1},512)])),_:1}),_(f,null,{default:y((()=>[_(m),_(I)])),_:1}),_(T,{ref_key:"Upsert",ref:u},null,512),_(ee,{ref:O(n)("kfMove")},null,512)])),_:1},512)}}}),ue={class:"dept-select"},pe=v({name:"project-select"}),ce=W(v({...pe,props:{modelValue:[Array,Number,String],multiple:Boolean,checkStrictly:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(e,{emit:t}){const o=e,{service:a}=l(),n=P(),i=P();function u(e){o.multiple||t("update:modelValue",e)}function p(e,{checkedKeys:l}){o.multiple&&t("update:modelValue",l)}return F((()=>o.modelValue),(e=>{n.value=e}),{immediate:!0}),f((()=>{a.customer_pro.project.list().then((e=>{i.value=s(e)})).catch((e=>{i.value=[],r.error(e.message)}))})),(l,t)=>{const o=j("el-tree-select");return b(),h("div",ue,[_(o,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),"node-key":"id",data:i.value,props:{label:"name",value:"id",children:"children"},multiple:e.multiple,"check-strictly":e.checkStrictly,"show-checkbox":e.multiple,"default-expand-all":"",onChange:u,onCheck:p},null,8,["modelValue","data","multiple","check-strictly","show-checkbox"])])}}}),[["__scopeId","data-v-7b030312"]]),de={class:"dept-move"},me=v({name:"project-move"}),ve=v({...me,setup(t,{expose:a}){const{service:s}=l(),n=e.useForm(),i=e.useCrud();return a({open:async function(e){var l;null==(l=n.value)||l.open({title:"组别转移",width:"500px",props:{labelWidth:"80px"},items:[{label:"选择项目",prop:"projectId",component:{vm:ce}}],on:{submit(l,{done:t,close:a}){if(!l.projectId)return r.warning("请选择项目"),t();o.confirm("转移到新项目，组内客服列表也会一起迁移，也会影响分配队列，是否继续？","提示",{type:"warning"}).then((()=>{s.customer_pro.project_group.move({...l,ids:e}).then((()=>{var e;r.success("转移成功"),null==(e=i.value)||e.refresh(),a()})).catch((e=>{r.error(e.message),t()}))})).catch((()=>null))}}})}}),(e,l)=>{const t=j("cl-form");return b(),h("div",de,[_(t,{ref_key:"Form",ref:n},null,512)])}}}),fe=v({name:"customer_pro-project"}),je=v({...fe,setup(t){const{service:r,refs:s,setRefs:n}=l(),{ViewGroup:u}=i(),p=P(0),c=P(),d=P(),m=P(),v=P(),f=e.useUpsert({items:[{label:"客服组名称",prop:"name",required:!0,component:{name:"el-input"}},{label:"项目",prop:"projectId",required:!0,component:{name:"el-select"}},{label:"备注",prop:"remark",component:{name:"el-input",props:{type:"textarea",rows:4}}}],async onOpen(){var e,l,t,a,s,n;const i=await r.customer_pro.project.list();0!=i.length?(null==(e=f.value)||e.setOptions("projectId",i.map((e=>({label:e.name,value:e.id})))),(null==(t=null==(l=u.value)?void 0:l.selected)?void 0:t.id)&&(null==(n=f.value)||n.setForm("projectId",null==(s=null==(a=u.value)?void 0:a.selected)?void 0:s.id))):o.alert("请先到左侧栏目：院校管理 >> 项目管理，添加项目","警告",{confirmButtonText:"OK",callback:()=>{var e;null==(e=f.value)||e.close()}})}}),h=e.useTable({columns:[{type:"selection"},{label:"客服组名称",prop:"name"},{label:"备注",prop:"remark",minWidth:150,showOverflowTooltip:!0},{label:"创建时间",prop:"createTime"},{type:"op",width:220,buttons:["edit","slot-add"]}]}),g=e.useCrud({service:r.customer_pro.project_group});function I(e){var l;null==(l=g.value)||l.refresh(e)}const T=P(!1);return F(T,(e=>{T.value||v.value.refresh()})),(e,l)=>{const t=j("cl-refresh-btn"),o=j("cl-add-btn"),i=j("cl-multi-delete-btn"),U=j("el-button"),R=j("cl-flex1"),F=j("cl-search-key"),P=j("cl-row"),M=j("cl-table"),q=j("cl-pagination"),z=j("cl-upsert"),W=j("cl-crud"),B=j("cl-view-group"),N=w("permission");return b(),x(B,{ref_key:"ViewGroup",ref:u,leftWidth:"260px"},{left:y((()=>[_(J,{ref_key:"subTree",ref:v,onRefresh:I},null,512)])),right:y((()=>[_(W,{ref_key:"Crud",ref:g},{default:y((()=>[_(P,null,{default:y((()=>{var e;return[_(t),_(o),_(i),C((b(),x(U,{type:"success",disabled:0==(null==(e=O(h))?void 0:e.selection.length),onClick:l[0]||(l[0]=e=>async function(e){var l;let t=[];t=e?[e.id]:(null==(l=h.value)?void 0:l.selection.map((e=>e.id)))||[],s.projectMove.open(t)}())},{default:y((()=>[k("转移")])),_:1},8,["disabled"])),[[N,O(r).customer_pro.project_group.permission.move]]),_(R),_(F,{placeholder:"搜索客服组名称"})]})),_:1}),_(P,null,{default:y((()=>[_(M,{ref_key:"Table",ref:h,border:!1},{"slot-add":y((({scope:e})=>[O(r).customer_pro.kf._permission.list?(b(),x(U,{key:0,text:"",bg:"",type:"info",onClick:l=>{return t=e.row,T.value=!0,p.value++,c.value=t.id,d.value=t.name,void(m.value=t.projectId);var t}},{default:y((()=>[k("客服列表")])),_:2},1032,["onClick"])):V("",!0)])),_:1},512)])),_:1}),_(P,null,{default:y((()=>[_(R),_(q)])),_:1}),_(z,{ref_key:"Upsert",ref:f},null,512),_(ve,{ref:O(n)("projectMove")},null,512),_(O(a),{modelValue:T.value,"onUpdate:modelValue":l[1]||(l[1]=e=>T.value=e),title:d.value,direction:"rtl",size:"80%"},{default:y((()=>[(b(),x(ie,{key:p.value,groupId:c.value,projectId:m.value},null,8,["groupId","projectId"]))])),_:1},8,["modelValue","title"])])),_:1},512)])),_:1},512)}}});export{je as default};
